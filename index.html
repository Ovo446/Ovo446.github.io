<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>üçä ClassicSpark V4.0</title>
  <style>
    body {
      margin: 0;
      font-family: "Georgia", serif;
      background: url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1920&q=80') no-repeat center center fixed;
      background-size: cover;
      color: #333;
    }
    header {
      backdrop-filter: blur(8px);
      background-color: rgba(255, 255, 255, 0.5);
      padding: 1em;
      text-align: center;
      border-bottom: 2px solid #ffa94d;
    }
    h1 {
      margin: 0;
    }
    nav {
      margin-top: 10px;
    }
    nav button {
      margin: 0 10px;
      padding: 0.5em 1em;
      background: #fff3bf;
      border: 2px solid #ffa94d;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
    }
    main {
      padding: 2em;
      max-width: 700px;
      margin: auto;
      background-color: rgba(255, 255, 255, 0.75);
      border-radius: 12px;
      margin-top: 30px;
    }
    #meta {
      font-style: italic;
      color: #555;
      margin-bottom: 10px;
    }
    #articleText span {
      cursor: pointer;
      color: #1c7ed6;
    }
    #readButton {
      margin-top: 15px;
      padding: 0.4em 1em;
      background: #d0ebff;
      border: 1px solid #339af0;
      border-radius: 8px;
      cursor: pointer;
    }
    #tooltip {
      position: absolute;
      display: none;
      background: #fff3bf;
      border: 1px solid #fab005;
      padding: 10px;
      border-radius: 6px;
      max-width: 250px;
      z-index: 999;
      font-size: 14px;
    }
    #mascot {
      position: fixed;
      bottom: 10px;
      right: 10px;
      width: 80px;
      height: 80px;
      background: url('https://em-content.zobj.net/source/animated-noto-color-emoji/356/smiling-face-with-smiling-eyes_1f60a.gif') no-repeat center center;
      background-size: contain;
      transition: transform 0.3s ease;
    }
    #micButton {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #e7f5ff;
      border: 2px solid #74c0fc;
      padding: 10px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <header>
    <h1>üçä ClassicSpark</h1>
    <nav>
      <button onclick="loadArticle()">New Article</button>
    </nav>
  </header>

  <main>
    <div id="meta"></div>
    <p id="articleText"></p >
    <button id="readButton" onclick="readAloud()">Read Aloud</button>
  </main>

  <div id="tooltip"></div>
  <div id="mascot"></div>
  <button id="micButton" onclick="startSpeech()">üé§</button>

  <script>
    const articles = [
      {
        text: "It was the best of times, it was the worst of times.",
        author: "Charles Dickens",
        source: "A Tale of Two Cities"
      },
      {
        text: "So we beat on, boats against the current, borne back ceaselessly into the past.",
        author: "F. Scott Fitzgerald",
        source: "The Great Gatsby"
      },
      {
        text: "All animals are equal, but some animals are more equal than others.",
        author: "George Orwell",
        source: "Animal Farm"
      }
    ];

    const dictionary = {
      best: {
        def: "Of the highest quality, excellence.",
        example: "She gave her best performance."
      },
      worst: {
        def: "Of the lowest quality or most severe.",
        example: "It was the worst storm of the year."
      },
      boats: {
        def: "Small vessels for traveling on water.",
        example: "Fishing boats lined the shore."
      },
      equal: {
        def: "Being the same in quantity or value.",
        example: "We treat all people as equal."
      },
      past: {
        def: "A time before the present.",
        example: "He often thought about the past."
      }
    };

    function loadArticle() {
      const a = articles[Math.floor(Math.random() * articles.length)];
      const words = a.text.split(" ").map(word => {
        const clean = word.toLowerCase().replace(/[^\w]/g, '');
        return `<span onmouseenter="showTooltip(event, '${clean}')" onmouseleave="hideTooltip()">${word}</span>`;
      });
      document.getElementById("articleText").innerHTML = words.join(" ");
      document.getElementById("meta").textContent = `${a.author} ‚Äî ${a.source}`;
    }

    function readAloud() {
      const text = document.getElementById("articleText").innerText;
      const utterance = new SpeechSynthesisUtterance(text);
      speechSynthesis.cancel();
      speechSynthesis.speak(utterance);
    }

    function showTooltip(e, word) {
      if (!dictionary[word]) return;
      const tip = document.getElementById("tooltip");
      tip.innerHTML = `<strong>${word}</strong><br>${dictionary[word].def}<br><em>${dictionary[word].example}</em>`;
      tip.style.left = e.pageX + 10 + "px";
      tip.style.top = e.pageY + 10 + "px";
      tip.style.display = "block";
    }

    function hideTooltip() {
      document.getElementById("tooltip").style.display = "none";
    }

    const mascot = document.getElementById("mascot");
    document.addEventListener("mousemove", e => {
      const eyeX = e.clientX;
      const centerX = window.innerWidth - 50;
      const diff = eyeX - centerX;
      mascot.style.transform = `translateX(${diff / 20}px)`;
    });

    function startSpeech() {
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      if (!SpeechRecognition) {
        alert("Speech recognition not supported.");
        return;
      }
      const recognition = new SpeechRecognition();
      recognition.lang = "en-US";
      recognition.start();
      recognition.onresult = event => {
        const spoken = event.results[0][0].transcript.toLowerCase().trim();
        const original = document.getElementById("articleText").innerText.toLowerCase().trim();
        if (spoken && original && spoken.includes(original.slice(0, 5))) {
          mascot.style.transform = "scale(1.4)";
          setTimeout(() => mascot.style.transform = "scale(1)", 1000);
        }
      };
    }

    window.onload = loadArticle;
  </script>
</body>
</html>
